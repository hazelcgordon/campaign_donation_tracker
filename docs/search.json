[
  {
    "objectID": "projects.html#project-2",
    "href": "projects.html#project-2",
    "title": "Projects",
    "section": "Project 2",
    "text": "Project 2"
  },
  {
    "objectID": "projects.html#project-3",
    "href": "projects.html#project-3",
    "title": "Projects",
    "section": "Project 3",
    "text": "Project 3"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Electoral Commission Pre-Election Data",
    "section": "",
    "text": "This includes the recently released donations for Q1, but also any donation that been registered with the EC so far for this year. Full figures not released for April/May period yet.\n\n\n\n\n\n\n\n\n\n\n\n\nThis graph combines individual MPs, mayors and members associations by their associated political party.\n\n\n\n\n\n\n\n\n\nThis ones shows the amount split by the type of donee.\n\nmay2024$RegulatedDoneeType &lt;- factor(may2024$RegulatedDoneeType, levels = c(\"MP - Member of Parliament\", \"Mayor\", \"Members Association\", \"Senedd Member\"))\n\n\n# Create a complete data frame with all combinations of Donortype and PartyAffiliation\ncomplete_data &lt;- expand.grid(PartyAffiliation = \n                              levels(may2024$PartyAffiliation), \n                             RegulatedDoneeType = \n                               unique(may2024$RegulatedDoneeType)\n                             )\n\n#create summary\n\ndoneetype_summary &lt;- may2024 %&gt;%\n  group_by(PartyAffiliation, RegulatedDoneeType) %&gt;%\n  summarize(TotalValue = sum(Value, na.rm = TRUE), .groups = 'drop') %&gt;%\n  right_join(complete_data, by = c(\"PartyAffiliation\", \n                                   \"RegulatedDoneeType\")) %&gt;%\n  replace_na(list(TotalValue = 0))\n\n# Add a formatted value column for hover text\ndoneetype_summary &lt;- doneetype_summary %&gt;%\n  mutate(HoverText = paste0(\"Total Value: £\", format(TotalValue, big.mark = \",\", scientific = FALSE), \"&lt;br&gt;\",\n                            \"Donee Type: \", RegulatedDoneeType, \"&lt;br&gt;\",\n                            \"Party Affiliation: \", PartyAffiliation))\n\n#custom colours\n\ntype_colors &lt;- c(\"MP - Member of Parliament\" = \"#1f78b4\", \"Mayor\" = \"#6a3d9a\", \"Members Association\" = \"#ff7f00\", \"Senedd Member\" = \"#b2df8a\")\n\n# Create the base plot\ndoneetype_p &lt;- ggplot(doneetype_summary, aes(x = PartyAffiliation, y = TotalValue, fill = RegulatedDoneeType, text = HoverText)) +\n  geom_bar(stat = \"identity\", position = position_dodge2(preserve = \"single\"), width = 0.7) +\n  scale_y_continuous(labels = scales::dollar_format(prefix = \"£\")) +\n  scale_fill_manual(values = type_colors) +\n  labs(title = \"\",\n       x = \"\",\n       y = \"\") +\n  theme_minimal() +\n  theme(legend.position = \"bottom\",\n        legend.title = element_blank(),\n        legend.text = element_text(size = 8),\n        legend.margin = margin(t = 10),\n        legend.key.size = unit(0.5, \"lines\"))\n\n#changing the hover info\n\ndoneetype_int &lt;- ggplotly(doneetype_p, tooltip = c(\"text\"))\n\n#customisation\n\ndoneetype_int &lt;- doneetype_int %&gt;%\n  layout(\n    legend = list(\n      title = list(text = NULL),  # Remove the legend title\n      orientation = \"h\",          # Horizontal legend\n      x = 0.5,                    # Centered horizontally\n      xanchor = \"center\",         # Center the legend\n      y = -0.2,                   # Position below the plot\n      yanchor = \"top\",            # Align to the top\n      font = list(size = 10),     # Adjust legend font size\n      itemwidth = 30              # Adjust the width of legend items\n    ),\n       annotations = list(\n      x = 1,                      # Position on the right\n      y = 1,                   # Position below the legend\n      text = \"Source: Electoral Commission 2024 Donations Data\",  \n      showarrow = FALSE,          # No arrow\n      xref = 'paper',             # Relative to the plotting area\n      yref = 'paper',             # Relative to the plotting area\n      xanchor = 'right',          # Align text to the right\n      yanchor = 'top',           # Automatic vertical alignment\n      font = list(size = 10)      # Adjust annotation font size\n    )\n  )\n\n\ndoneetype_int\n\n\n\n\nI’m not sure what the requirements are on this for donors - but this one basically shows what % of donors didn’t disclose the purpose of their donation (by donor type), so it says something interesting about the level of transparency behind these things.\n\n# Iterate over the rows and update NatureOfDonation based on DonationType\nfor (i in 1:nrow(may2024)) {\n  if (may2024$DonationType[i] == \"Visit\") {\n    may2024$NatureOfDonation[i] &lt;- \"Visit\"\n  }\n}\n\n#fill empty cells with 'undisclosed'\n\nfor (i in 1:nrow(may2024)) {\n  if (may2024$NatureOfDonation[i] == \"\") {\n    may2024$NatureOfDonation[i] &lt;- \"Undisclosed\"\n  }\n}\n\n#set factor levels\n\nmay2024$NatureOfDonation &lt;- factor(may2024$NatureOfDonation, levels = c(\"Undisclosed\", \"Staff costs\", \"Administration services\", \"Consultancy services\", \"Visit\"))\n\n#group donor status by disclosure of purpose\n\ndonor_status_percent &lt;- may2024 %&gt;%\n  group_by(DonorStatus, NatureOfDonation) %&gt;%\n  summarise(Count = n(), .groups = 'drop') %&gt;%\n  group_by(DonorStatus) %&gt;%\n  mutate(Percentage = Count / sum(Count) * 100) %&gt;%\n  ungroup()\n\n#altering display of x-axis labels\n\ndonor_status_percent &lt;- donor_status_percent %&gt;%\n  mutate(DonorStatus = case_when(\n    DonorStatus == \"Unincorporated Association\" ~ \"Unincorporated\\n Association\",\n    TRUE ~ DonorStatus\n  ))\n\ndonor_status_percent &lt;- donor_status_percent %&gt;%\n  mutate(DonorStatus = case_when(\n    DonorStatus == \"Registered Political Party\" ~ \"Registered\\n Political Party\",\n    TRUE ~ DonorStatus\n  ))\n\n#re-order factor\n\ndonor_status_percent &lt;- donor_status_percent %&gt;%\n  mutate(DonorStatus = factor(DonorStatus, levels = c(\"Registered\\n Political Party\", \"Trade Union\", \"Company\", \"Individual\", \"Unincorporated\\n Association\", \"Other\")))\n\n# Add a formatted value column for hover text\ndonor_status_percent &lt;- donor_status_percent %&gt;%\n  mutate(HoverText = paste0(\"Total Frequency: \", format(Count), \"&lt;br&gt;\",\n                            \"Percentage: \", sprintf(\"%.1f\", Percentage), \n                            \"&lt;br&gt;\",\n                            \"Nature of Donation: \", NatureOfDonation))\n\n#create a stacked bar chart plot\n\nstatus_colors &lt;- c(\"Undisclosed\" = \"#1f78b4\", \"Staff costs\" = \"#6a3d9a\", \"Administration services\" = \"#ff7f00\", \"Consultancy services\" = \"#b2df8a\", \"Visit\" = \"lightyellow\")\n\nnature_p &lt;- ggplot(donor_status_percent, aes(x = DonorStatus, y = Percentage, fill = NatureOfDonation, text = HoverText)) +\n  geom_bar(stat = \"identity\", position = \"fill\") +\n  scale_y_continuous(labels = scales::percent) +\n  scale_fill_manual(values = status_colors) +\n  labs(title = \"\",\n       x = \"\",\n       y = \"\",\n       fill = \"\") +\n  theme_minimal() +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1))\n\n#interactive plot\n\nnature_int &lt;- ggplotly(nature_p, tooltip = c(\"text\"))\n\n#customisation\n\nnature_int &lt;- nature_int %&gt;%\n  layout(\n    legend = list(\n      title = list(text = NULL),  # Remove the legend title\n      orientation = \"v\",          # Vertical legend\n      x = 1.02,                   \n      xanchor = \"left\",           # Align to the left\n      y = 0.5,                    # Center vertically\n      yanchor = \"middle\",         # Align to the middle\n      font = list(size = 10),     # Adjust legend font size\n      itemwidth = 30),\n    margin = list(r = 120),       \n    annotations = list(\n      list(\n        x = 1,                      # Position on the right\n        y = -0.3,                   # Position below the legend\n        text = \"Source: Electoral Commission 2024 Donations Data\",  \n        showarrow = FALSE,          # No arrow\n        xref = 'paper',             # Relative to the plotting area\n        yref = 'paper',             # Relative to the plotting area\n        xanchor = 'right',          # Align text to the right\n        yanchor = 'auto',           # Automatic vertical alignment\n        font = list(size = 10)      # Adjust annotation font size\n      )\n    )\n  )\n\nnature_int"
  },
  {
    "objectID": "index.html#donations-q1-2024-period",
    "href": "index.html#donations-q1-2024-period",
    "title": "Electoral Commission Pre-Election Data",
    "section": "",
    "text": "This includes the recently released donations for Q1, but also any donation that been registered with the EC so far for this year. Full figures not released for April/May period yet.\n\n\n\n\n\n\n\n\n\n\n\n\nThis graph combines individual MPs, mayors and members associations by their associated political party.\n\n\n\n\n\n\n\n\n\nThis ones shows the amount split by the type of donee.\n\nmay2024$RegulatedDoneeType &lt;- factor(may2024$RegulatedDoneeType, levels = c(\"MP - Member of Parliament\", \"Mayor\", \"Members Association\", \"Senedd Member\"))\n\n\n# Create a complete data frame with all combinations of Donortype and PartyAffiliation\ncomplete_data &lt;- expand.grid(PartyAffiliation = \n                              levels(may2024$PartyAffiliation), \n                             RegulatedDoneeType = \n                               unique(may2024$RegulatedDoneeType)\n                             )\n\n#create summary\n\ndoneetype_summary &lt;- may2024 %&gt;%\n  group_by(PartyAffiliation, RegulatedDoneeType) %&gt;%\n  summarize(TotalValue = sum(Value, na.rm = TRUE), .groups = 'drop') %&gt;%\n  right_join(complete_data, by = c(\"PartyAffiliation\", \n                                   \"RegulatedDoneeType\")) %&gt;%\n  replace_na(list(TotalValue = 0))\n\n# Add a formatted value column for hover text\ndoneetype_summary &lt;- doneetype_summary %&gt;%\n  mutate(HoverText = paste0(\"Total Value: £\", format(TotalValue, big.mark = \",\", scientific = FALSE), \"&lt;br&gt;\",\n                            \"Donee Type: \", RegulatedDoneeType, \"&lt;br&gt;\",\n                            \"Party Affiliation: \", PartyAffiliation))\n\n#custom colours\n\ntype_colors &lt;- c(\"MP - Member of Parliament\" = \"#1f78b4\", \"Mayor\" = \"#6a3d9a\", \"Members Association\" = \"#ff7f00\", \"Senedd Member\" = \"#b2df8a\")\n\n# Create the base plot\ndoneetype_p &lt;- ggplot(doneetype_summary, aes(x = PartyAffiliation, y = TotalValue, fill = RegulatedDoneeType, text = HoverText)) +\n  geom_bar(stat = \"identity\", position = position_dodge2(preserve = \"single\"), width = 0.7) +\n  scale_y_continuous(labels = scales::dollar_format(prefix = \"£\")) +\n  scale_fill_manual(values = type_colors) +\n  labs(title = \"\",\n       x = \"\",\n       y = \"\") +\n  theme_minimal() +\n  theme(legend.position = \"bottom\",\n        legend.title = element_blank(),\n        legend.text = element_text(size = 8),\n        legend.margin = margin(t = 10),\n        legend.key.size = unit(0.5, \"lines\"))\n\n#changing the hover info\n\ndoneetype_int &lt;- ggplotly(doneetype_p, tooltip = c(\"text\"))\n\n#customisation\n\ndoneetype_int &lt;- doneetype_int %&gt;%\n  layout(\n    legend = list(\n      title = list(text = NULL),  # Remove the legend title\n      orientation = \"h\",          # Horizontal legend\n      x = 0.5,                    # Centered horizontally\n      xanchor = \"center\",         # Center the legend\n      y = -0.2,                   # Position below the plot\n      yanchor = \"top\",            # Align to the top\n      font = list(size = 10),     # Adjust legend font size\n      itemwidth = 30              # Adjust the width of legend items\n    ),\n       annotations = list(\n      x = 1,                      # Position on the right\n      y = 1,                   # Position below the legend\n      text = \"Source: Electoral Commission 2024 Donations Data\",  \n      showarrow = FALSE,          # No arrow\n      xref = 'paper',             # Relative to the plotting area\n      yref = 'paper',             # Relative to the plotting area\n      xanchor = 'right',          # Align text to the right\n      yanchor = 'top',           # Automatic vertical alignment\n      font = list(size = 10)      # Adjust annotation font size\n    )\n  )\n\n\ndoneetype_int\n\n\n\n\nI’m not sure what the requirements are on this for donors - but this one basically shows what % of donors didn’t disclose the purpose of their donation (by donor type), so it says something interesting about the level of transparency behind these things.\n\n# Iterate over the rows and update NatureOfDonation based on DonationType\nfor (i in 1:nrow(may2024)) {\n  if (may2024$DonationType[i] == \"Visit\") {\n    may2024$NatureOfDonation[i] &lt;- \"Visit\"\n  }\n}\n\n#fill empty cells with 'undisclosed'\n\nfor (i in 1:nrow(may2024)) {\n  if (may2024$NatureOfDonation[i] == \"\") {\n    may2024$NatureOfDonation[i] &lt;- \"Undisclosed\"\n  }\n}\n\n#set factor levels\n\nmay2024$NatureOfDonation &lt;- factor(may2024$NatureOfDonation, levels = c(\"Undisclosed\", \"Staff costs\", \"Administration services\", \"Consultancy services\", \"Visit\"))\n\n#group donor status by disclosure of purpose\n\ndonor_status_percent &lt;- may2024 %&gt;%\n  group_by(DonorStatus, NatureOfDonation) %&gt;%\n  summarise(Count = n(), .groups = 'drop') %&gt;%\n  group_by(DonorStatus) %&gt;%\n  mutate(Percentage = Count / sum(Count) * 100) %&gt;%\n  ungroup()\n\n#altering display of x-axis labels\n\ndonor_status_percent &lt;- donor_status_percent %&gt;%\n  mutate(DonorStatus = case_when(\n    DonorStatus == \"Unincorporated Association\" ~ \"Unincorporated\\n Association\",\n    TRUE ~ DonorStatus\n  ))\n\ndonor_status_percent &lt;- donor_status_percent %&gt;%\n  mutate(DonorStatus = case_when(\n    DonorStatus == \"Registered Political Party\" ~ \"Registered\\n Political Party\",\n    TRUE ~ DonorStatus\n  ))\n\n#re-order factor\n\ndonor_status_percent &lt;- donor_status_percent %&gt;%\n  mutate(DonorStatus = factor(DonorStatus, levels = c(\"Registered\\n Political Party\", \"Trade Union\", \"Company\", \"Individual\", \"Unincorporated\\n Association\", \"Other\")))\n\n# Add a formatted value column for hover text\ndonor_status_percent &lt;- donor_status_percent %&gt;%\n  mutate(HoverText = paste0(\"Total Frequency: \", format(Count), \"&lt;br&gt;\",\n                            \"Percentage: \", sprintf(\"%.1f\", Percentage), \n                            \"&lt;br&gt;\",\n                            \"Nature of Donation: \", NatureOfDonation))\n\n#create a stacked bar chart plot\n\nstatus_colors &lt;- c(\"Undisclosed\" = \"#1f78b4\", \"Staff costs\" = \"#6a3d9a\", \"Administration services\" = \"#ff7f00\", \"Consultancy services\" = \"#b2df8a\", \"Visit\" = \"lightyellow\")\n\nnature_p &lt;- ggplot(donor_status_percent, aes(x = DonorStatus, y = Percentage, fill = NatureOfDonation, text = HoverText)) +\n  geom_bar(stat = \"identity\", position = \"fill\") +\n  scale_y_continuous(labels = scales::percent) +\n  scale_fill_manual(values = status_colors) +\n  labs(title = \"\",\n       x = \"\",\n       y = \"\",\n       fill = \"\") +\n  theme_minimal() +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1))\n\n#interactive plot\n\nnature_int &lt;- ggplotly(nature_p, tooltip = c(\"text\"))\n\n#customisation\n\nnature_int &lt;- nature_int %&gt;%\n  layout(\n    legend = list(\n      title = list(text = NULL),  # Remove the legend title\n      orientation = \"v\",          # Vertical legend\n      x = 1.02,                   \n      xanchor = \"left\",           # Align to the left\n      y = 0.5,                    # Center vertically\n      yanchor = \"middle\",         # Align to the middle\n      font = list(size = 10),     # Adjust legend font size\n      itemwidth = 30),\n    margin = list(r = 120),       \n    annotations = list(\n      list(\n        x = 1,                      # Position on the right\n        y = -0.3,                   # Position below the legend\n        text = \"Source: Electoral Commission 2024 Donations Data\",  \n        showarrow = FALSE,          # No arrow\n        xref = 'paper',             # Relative to the plotting area\n        yref = 'paper',             # Relative to the plotting area\n        xanchor = 'right',          # Align text to the right\n        yanchor = 'auto',           # Automatic vertical alignment\n        font = list(size = 10)      # Adjust annotation font size\n      )\n    )\n  )\n\nnature_int"
  },
  {
    "objectID": "may2024.html",
    "href": "may2024.html",
    "title": "Pre poll donations 2019 GE",
    "section": "",
    "text": "Goals for this page:\n\nCreate data summaries for the following questions ready for comparison with 2024 data:\n\nTotal donated to each party, classified as official pre-poll regulatory period\nTable to get a sense of lots of small donations, or a few big ones, and where were they coming from.\nPlot of type of donor and total amount donated across each week.\nFrom the 2019 data - how much money was received by central parties during the election period, without it being reported as pre-poll?\n\n\nThe table below only include donations that were classified under ‘Pre-poll party’ for the 6 weeks leading up to the elections. However, this might not be representative of actual amounts, because there were many donations made to parties not disclosed until Jan 2020 and put under the label of ‘Q4 2019’ or just at the time period they were eventually reported.\nI’ll also make a graph showing donations from each type of donor to each political party with an average for amount spent, for all donations explicitly listed as pre-poll.\n\n\n\n\n\n\nRegulatedEntityName\nPre-Poll 1 - Party(06/11/19 - 12/11/19) UKPGE 2019\nPre-Poll 2 - Party(13/11/19 - 19/11/19) UKPGE 2019\nPre-Poll 3 - Party(20/11/19 - 26/11/19) UKPGE 2019\nPre-Poll 4 - Party(27/11/19 - 03/12/19) UKPGE 2019\nPre-Poll 5 - Party(04/12/19 - 10/12/19) UKPGE 2019\nPre-Poll 6 - Party(11/12/19 - 12/12/19) UKPGE 2019\n\n\n\n\nConservative and Unionist Party\n£5,673,646\n£2,967,000\n£3,590,500\n£3,201,965\n£2,545,500\n£1,392,297\n\n\nLabour Party\n£ 218,500\n£3,488,000\n£ 521,909\n£1,017,417\n£ 165,471\n£ 0\n\n\nLiberal Democrats\n£ 275,000\n£ 251,000\n£ 509,998\n£ 80,000\n£ 130,000\n£ 0\n\n\nGreen Party\n£ 30,000\n£ 37,750\n£ 100,000\n£ 50,000\n£ 24,727\n£ 0\n\n\nAdvance Together [De-registered 01/10/20]\n£ 0\n£ 0\n£ 0\n£ 22,750\n£ 39,750\n£ 0\n\n\nReform UK\n£ 250,000\n£2,250,000\n£ 0\n£ 125,000\n£1,475,000\n£ 50,000\n\n\nPlaid Cymru - The Party of Wales\n£ 0\n£ 70,000\n£ 0\n£ 0\n£ 0\n£ 0\n\n\nAlliance - Alliance Party of Northern Ireland\n£ 60,000\n£ 0\n£ 15,000\n£ 0\n£ 0\n£ 0\n\n\nScottish National Party (SNP)\n£ 0\n£ 10,000\n£ 0\n£ 0\n£ 0\n£ 14,929\n\n\nSinn Féin\n£ 0\n£ 0\n£ 0\n£ 14,465\n£ 0\n£ 0\n\n\nDemocratic Unionist Party - D.U.P.\n£ 0\n£ 0\n£ 0\n£ 19,425\n£ 0\n£ 0\n\n\nRenew\n£ 0\n£ 0\n£ 0\n£ 15,000\n£ 0\n£ 0\n\n\nWomen's Equality Party\n£ 0\n£ 0\n£ 0\n£ 0\n£ 20,000\n£ 0"
  }
]